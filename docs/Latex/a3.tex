% !TEX encoding = UTF-8
%Koma article
\documentclass[fontsize=12pt,paper=letter,twoside]{scrartcl}
\usepackage{float}
\usepackage{listings}
\usepackage{makecell}

%Standard Pre-amble
\input{sty/defns.tex}
%Useful definitions
%\newcommand{\mv}[1]{\textit{m\_#1}}
%\newcommand{\cv}[1]{\textit{c\_#1}}
%\newcommand{\degree}[1]{^{\circ}\mathrm{#1}}
%\newcommand{\comment}[1]{{\footnotesize \quad\texttt{--}\textrm{#1}}}


%For Code Stylings
\usepackage{listings}
\usepackage{color}
\usepackage{hyperref}

\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}

\lstset{frame=tb,
  language=Java,
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\small\ttfamily},
  numbers=none,
  numberstyle=\tiny\color{gray},
  keywordstyle=\color{blue},
  commentstyle=\color{dkgreen},
  stringstyle=\color{mauve},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=3
}

% Set the header
\ihead[]{\small EECS4313 Assignment-3}


%%%%%%%%%%%%Enter your names here%%%%%%%%
\author{Student Name | Student Number | EECS Account
\and \textbf{Edward Vaisman | 212849857 | eddyv}
\and \textbf{Robin Bandzar | 212200531 | cse23028}
\and \textbf{Kirusanth Thiruchelvam | 212918298 | kirusant}
\and \textbf{Sadman Sakib Hasan | 212497509 | cse23152}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\date{\today} % Display a given date or no date

\begin{document}
\title{EECS 4313 Assignment 3 \\Data Flow Testing, Slice-Based Testing and Mutation Testing}
\maketitle

\newpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\tableofcontents
\listoffigures

\newpage


\section{BORG Calendar}

\begin{itemize}
\item The data flow analysis you performed and the calculation of the coverage metrics. You must
show which test cases are responsible for which dc-paths.
\item A description of the test cases you added to improve coverage. If your coverage was already high,
discuss how your testing was able to achieve this.
\item The slices that you identified and the percentage of slices that your testing covers. You must
show which test cases are responsible for which slices.
\item A description of the test cases you added to improve slice coverage. If your coverage was
already high, discuss how your testing was able to achieve this.
\item Evaluate the effectiveness of your test cases using mutation testing. Discuss and address any
issues if you have found in your written report.
\item Attaching bug reports if bugs are discovered using your testing methods. You should use the
same bug report format as in Assignment 1. Do not file these bug reports to the projectâ€™s bug
report system.
\item An appendix with the specification of the methods you are testing
\end{itemize}

\newpage
\section{JPetStore}

After exploring the JPetStore system, we came up with some realistic non-trivial test scenarios that can be carried out for load testing using JMeter. The following subsections cover each scenarios, description on how it was load tested and the result analysis of the load test.

\bigskip
\noindent Following are the system specifications for which the load test was conducted under:
\begin{itemize}
\item \textbf{Operating System}: Windows 10 Pro 64-bit (10.0, Build 16299)
\item \textbf{Language}: English (Regional Setting: English)
\item \textbf{System Manufacturer}: Hewlett-Packard
\item \textbf{System Model}: HP 15 TouchSmart Notebook PC
\item \textbf{BIOS}: F.10
\item \textbf{Processor}: AMD A6-5200 APU with Radeon(TM) HD Graphics (4 CPUs), ~2.0GHz
\item \textbf{Memory}: 6144MB RAM
\item \textbf{Java Version}: 1.8.0\_151-b12
\end{itemize}

\newpage
\subsection{Scenario 1: Returning User}

\subsubsection{Overview}
The first test scenario is for an existing user in the system. The testing scenario will consist of a returning user logging in, selecting one of each of the 5 possible items sold in JPetStore, adding the items to the cart, performing a checkout of the cart and finally logging out. The following describes an exact breakdown of the steps the load test will carry out:

\begin{itemize}
\item Access the JPetStore Homepage (\url{http://localhost:8080/jpetstore/}).
\item Click \emph{Enter the Store}.
\item Click on the \emph{Sign in} button.
\item Enter sign-in credentials and click \emph{Login} By default, we will be using \emph{j2ee} user for this scenario.
\item Go to the \emph{Fish} section, select a fish item, add it to the cart and return to the main menu.
\item Go to the \emph{Dogs} section, select a dog item, add it to the cart and return to the main menu.
\item Go to the \emph{Reptiles} section, select a reptile item, add it to the cart and return to the main menu.
\item Go to the \emph{Cats} section, select a cat item, add it to the cart and return to the main menu.
\item Go to the \emph{Birds} section, select a bird item, add it to the cart.
\item Proceed to checkout and follow the steps until the order has been placed.
\item Return back to the main menu and sign out.
\end{itemize}

\newpage
\bigskip
\noindent The following images depicts the Recording Controller for the test case scenario and the pages our load test will navigate through per each iteration:

\begin{figure}[!htb]
\begin{center}
\includegraphics[width=.6\textwidth]{../../load-test/test-plans/returning-user/rc.png}
\end{center}
\caption{Recording Controller for Returning User Scenario}
\label{fig:ruser:rc}
\end{figure}

\clearpage
\subsubsection{Load Test Properties}
Following are the load test properties applied for testing this scenario:
\begin{itemize}
\item \textbf{Number of Thread (users)}: 5
\item \textbf{Ramp-up Period (in seconds)}: 10
\item \textbf{Loop Count}: 30
\item \textbf{Thread Delay (in milliseconds)}: 1000
\end{itemize}

\subsubsection{Executing Load Test}
After setting up the load test plan using JMeter, we executed the test. The test run was for approximately 18 minutes completing all 30 iterations. The following diagrams show the result tree of the test run.

\begin{figure}[!htb]
\begin{center}
\includegraphics[width=.9\textwidth]{../../load-test/test-plans/returning-user/result-tree.png}
\end{center}
\caption{View Results Tree for Returning User Scenario}
\label{fig:ruser:view_result_tree}
\end{figure}

\subsubsection{Analysing Load Test}
The following statistics were gathered from the Apache access logs by simple shell-scripting methodology for this test scenario:
\begin{itemize}
\item \textbf{Test Duration}: Approximately 18 minutes
\item \textbf{Total Number of Requests}: 4714
\item \textbf{Number of GET Requests}: 4399 (93\% of all requests)
\item \textbf{Number of POST Requests}: 315 (7\% of all requests)
\item \textbf{Success HTTP Codes}: 200 (Success) and 302 (Found)
\item \textbf{Failure HTTP Codes}: None
\end{itemize}

\bigskip
\noindent Following is a snapshot of the Apache access log:
\begin{figure}[!htb]
\begin{center}
\includegraphics[width=.8\textwidth]{../../load-test/test-plans/returning-user/access-log.png}
\end{center}
\caption{Apache Access Log Snapshot for Returning User Scenario}
\label{fig:ruser:access_log}
\end{figure}

\clearpage
\bigskip
\noindent Following is a snapshot of the Windows Performance Monitor and Java Monitor Console during the load test execution:

\begin{figure}[!htb]
\begin{center}
\includegraphics[width=.7\textwidth]{../../load-test/test-plans/returning-user/perfmon-ru.png}
\end{center}
\caption{Windows Performance Monitor Snapshot for Returning User Scenario}
\label{fig:ruser:perfmon}
\end{figure}

\begin{figure}[!htb]
\begin{center}
\includegraphics[width=.7\textwidth]{../../load-test/test-plans/returning-user/jconsole-ru.png}
\end{center}
\caption{JConsole Snapshot for Returning User Scenario}
\label{fig:ruser:jconsole}
\end{figure}

\smallskip
\noindent \textbf{Conclusion}: The load test scenario for returning user made about 4714 request and the test ran for approximately 18 minutes. Despite some natural high spikes on the performance monitor and java monitor, the load test was carried out successfully without any crashes or unexpected behaviour in the application.


\newpage
\subsection{Scenario 2: New User}

\subsubsection{Overview}
The second test scenario is for a new user in the system. The testing scenario will consist of registering a new user, selecting one of each of the 5 possible items sold in JPetStore, adding the items to the cart, performing a checkout of the cart and finally logging out. The following describes an exact breakdown of the steps the load test will carry out:

\begin{itemize}
\item Access the JPetStore Homepage (\url{http://localhost:8080/jpetstore/}).
\item Click \emph{Enter the Store}.
\item Click on the \emph{Sign in} button.
\item Click \emph{Register now}.
\item Enter the sign-up credentials and click \emph{Create Account}. The username and password for signing up would be loaded from a CSV file, whereas the other fields will be supplied the value of \emph{abc}.
\item Go to the \emph{Fish} section, select a fish item, add it to the cart and return to the main menu.
\item Go to the \emph{Dogs} section, select a dog item, add it to the cart and return to the main menu.
\item Go to the \emph{Reptiles} section, select a reptile item, add it to the cart and return to the main menu.
\item Go to the \emph{Cats} section, select a cat item, add it to the cart and return to the main menu.
\item Go to the \emph{Birds} section, select a bird item, add it to the cart.
\item Proceed to checkout and follow the steps until the order has been placed.
\item Return back to the main menu and sign out.
\end{itemize}

\newpage
\bigskip
\noindent The following images depicts the Recording Controller for the test case scenario and the pages our load test will navigate through per each iteration:

\begin{figure}[!htb]
\begin{center}
\includegraphics[width=.5\textwidth]{../../load-test/test-plans/new-user/rc.png}
\end{center}
\caption{Recording Controller for New User Scenario}
\label{fig:ruser:rc}
\end{figure}

\bigskip
\noindent The following images depicts the snapshot of the CSV file containing usernames and password for registering new users. On the POST request for registering a new user we load the credentials and use them through variable names such as \$\{username\} and \$\{password\}.

\begin{figure}[!htb]
\begin{center}
\includegraphics[width=.6\textwidth]{../../load-test/test-plans/new-user/csv.png}
\end{center}
\caption{CSV Credential File for New User Scenario}
\label{fig:ruser:csv}
\end{figure}

\begin{figure}[!htb]
\begin{center}
\includegraphics[width=.7\textwidth]{../../load-test/test-plans/new-user/post-request.png}
\end{center}
\caption{HTTP Post Request for New User Scenario}
\label{fig:ruser:csv}
\end{figure}

\clearpage
\subsubsection{Load Test Properties}
Following are the load test properties applied for testing this scenario:
\begin{itemize}
\item \textbf{Number of Thread (users)}: 5
\item \textbf{Ramp-up Period (in seconds)}: 5
\item \textbf{Loop Count}: 30
\item \textbf{Thread Delay (in milliseconds)}: 1000
\end{itemize}

\subsubsection{Executing Load Test}
After setting up the load test plan using JMeter, we executed the test. The test run was for approximately 15 minutes completing all 30 iterations. The following diagrams show the result tree of the test run.

\begin{figure}[!htb]
\begin{center}
\includegraphics[width=.9\textwidth]{../../load-test/test-plans/new-user/result-tree.png}
\end{center}
\caption{View Results Tree for New User Scenario}
\label{fig:nuser:view_result_tree}
\end{figure}

\subsubsection{Analysing Load Test}
The following statistics were gathered from the Apache access logs by simple shell-scripting methodology for this test scenario:
\begin{itemize}
\item \textbf{Test Duration}: Approximately 15 minutes
\item \textbf{Total Number of Requests}: 7500
\item \textbf{Number of GET Requests}: 7000 (93\% of all requests)
\item \textbf{Number of POST Requests}: 500 (7\% of all requests)
\item \textbf{Success HTTP Codes}: 200 (Success) and 302 (Found)
\item \textbf{Failure HTTP Codes}: None
\end{itemize}

\bigskip
\noindent Following is a snapshot of the Apache access log:
\begin{figure}[!htb]
\begin{center}
\includegraphics[width=.8\textwidth]{../../load-test/test-plans/new-user/access-log.png}
\end{center}
\caption{Apache Access Log Snapshot for New User Scenario}
\label{fig:nuser:access_log}
\end{figure}

\clearpage
\bigskip
\noindent Following is a snapshot of the Windows Performance Monitor and Java Monitor Console during the load test execution:

\begin{figure}[!htb]
\begin{center}
\includegraphics[width=.7\textwidth]{../../load-test/test-plans/new-user/perfmon-nu.png}
\end{center}
\caption{Windows Performance Monitor Snapshot for New User Scenario}
\label{fig:nuser:perfmon}
\end{figure}

\begin{figure}[!htb]
\begin{center}
\includegraphics[width=.7\textwidth]{../../load-test/test-plans/new-user/jconsole-nu.png}
\end{center}
\caption{JConsole Snapshot for New User Scenario}
\label{fig:nuser:jconsole}
\end{figure}

\smallskip
\noindent \textbf{Conclusion}: The load test scenario for new user made about 7500 request and the test ran for approximately 15 minutes. Despite some natural high spikes on the performance monitor and java monitor, the load test was carried out successfully without any crashes or unexpected behaviour in the application.

\end{document}
